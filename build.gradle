plugins {
    id "com.gradle.plugin-publish" version "0.11.0"
    id "java-gradle-plugin"
    id 'java'
    id 'maven-publish'
}

repositories {
    jcenter()
    mavenLocal()
}

version = "0.0.9"
group = "se.thinkcode"

dependencies {
    implementation gradleApi()

    testImplementation 'junit:junit:4.12'
    testImplementation 'org.assertj:assertj-core:3.11.1'
    testImplementation 'org.mockito:mockito-core:2.24.0'
}

gradlePlugin {
    plugins {
        cucumberRunnerPlugin {
            id = 'se.thinkcode.cucumber-runner'
            displayName = 'cucumber'
            description = 'A Cucumber-JVM runner'
            implementationClass = 'se.thinkcode.CucumberRunner'
        }
    }
}

publishing {
    repositories {
        maven {
            url = uri("https://tixartifactory.jfrog.io/tixartifactory/gradle-dev-local/")
            credentials {
                username = System.getenv("ARTIFACTORY_USR")
                password = System.getenv("ARTIFACTORY_PSW")
            }
        }
    }
}

pluginBundle {
    website = 'https://github.com/tradeix/gradle-cucumber-runner/blob/' + version + '/README.md'
    vcsUrl = 'https://github.com/tradeix/gradle-cucumber-runner'
    tags = ['cucumber', 'cucumber-jvm']
}